<!DOCTYPE html>
<html lang="en">
<head>
    <title>Sound-level</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0">
    <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
            height: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #buttonrow { width: 100%; position: absolute; top: 0; text-align: center; }

    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        var map;
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: -34.397, lng: 150.644},
                zoom: 16
            });

            var heatmapData = [];
            var magnitude = 10;
            heatmapData.push({ location: new google.maps.LatLng(59.9039333, 10.6343522), weight: 140 });
            heatmapData.push({ location: new google.maps.LatLng(59.9038666, 10.6343522), weight: 60 });
            heatmapData.push({ location: new google.maps.LatLng(59.9037999, 10.6343522), weight: 60 });
            var heatmap = new google.maps.visualization.HeatmapLayer({
                data: heatmapData,
                dissipating: true,
                maxIntensity: 140, // dB
                radius: 40,
                map: map
            });
        }

        function geo_success(position) {
            console.log(position.coords);
            if (map) {
                var pos = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                map.setCenter(pos);
            }
        }
        function geo_error() {
            alert("You need to enable geo location to use this application.");
        }
        var geo_options = {
            enableHighAccuracy: true,
            maximumAge        : 30000,
            timeout           : 27000
        };
        var wpid = navigator.geolocation.watchPosition(geo_success, geo_error, geo_options);

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDVjAzR2qmxK-dwAi7WYR2auureZWjxXTg&libraries=visualization&callback=initMap" async defer></script>
    <div id="buttonrow">
        <button>New session</button><select><option>Hello</option></select>
    </div>

</body>
</html>